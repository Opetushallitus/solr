#!/usr/bin/env bash

DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
ZKCLI=${DIR}/zkcli.sh

$ZKCLI -cmd upconfig -zkhost {{ zookeeper_host }}:{{ zookeeper_port}} -confdir ${DIR}/../collections/virkailija/virkailija0/conf/ -confname virkailija -solrhome ${DIR}/../home
$ZKCLI -cmd linkconfig -zkhost {{ zookeeper_host }}:{{ zookeeper_port}} -collection organisaatiot -confname virkailija -solrhome ${DIR}/../home
$ZKCLI -cmd linkconfig -zkhost {{ zookeeper_host }}:{{ zookeeper_port}} -collection hakukohteet -confname virkailija -solrhome ${DIR}/../home
$ZKCLI -cmd linkconfig -zkhost {{ zookeeper_host }}:{{ zookeeper_port}} -collection koulutukset -confname virkailija -solrhome ${DIR}/../home

echo "OPH SolrCloud configuration updated!"